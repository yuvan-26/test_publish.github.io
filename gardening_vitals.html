<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="test.css">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Jost:wght@400;500;700&display=swap" rel="stylesheet">
    <title>Bulblos</title>

    <style>
        /* Center the Plotly chart */
        #plotly-chart-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 40px;
        }

        #plotly-chart {
            width: 100%;
            max-width: 1000px;
            /* Limit chart width */
            text-align: center;
            color: #121f0c;
            font-size: 50px;
            font-family: 'Jost';
            font-weight: 500;
            word-wrap: break-word;
        }

        /* Style the dropdown container */
        #dropdown-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
        }

        /* Style the dropdown */
        #water-level-dropdown {
            padding: 10px;
            font-size: 20px;
            font-family: 'Jost';
        }

        /* Style the caption */
        #dropdown-caption {
            font-size: 24px;
            font-weight: 500;
            font-family: 'Jost';
            margin-right: 10px;
        }
    </style>
</head>

<body style="margin-top: 145px;">

    <!--Header-->
    <header style="width: 100%; z-index: 1000; position: fixed; top: 0;">
        <div class="header">

            <!--Header logo-->
            <div
                style="display: flex; width: 10%; height: 100%; justify-content: center; align-items: center; flex-direction: column;">
                <div style="height:70%; text-align: center;">
                    <a href="./index.html">
                        <image style="width: 80%;" src="./image/Logo.png">
                    </a>
                </div>
                <div
                    style="height: 30%; text-align: center; color:#403323; font-weight: 500; font-size: 20px; font-family: 'Jost';">
                    Bulblos
                </div>
            </div>

            <!--Header menu-->
            <div class="header-menu" style="width: 85%;">
                <div><a href="./index.html">Home</a></div>
                <div><a href="./plant_library.html">Plant Library</a></div>
                <div><a href="./gardening_vitals.html" class="active">Gardening Vitals</a></div>
                <div><a href="./plant_filter.html">Plant Filter</a></div>
                <div><a href="./about_us.html">About Us</a></div>
            </div>

        </div>
    </header>

    <div
        style="width: 100%; text-align: center; color: #121f0c; font-size: 50px; font-family: 'Jost'; font-weight: 500; word-wrap: break-word; margin-bottom: 40px;">
        Average Temperature by Vegetables
    </div>

    <!-- Description -->
    <div
        style="width: 100%; text-align: center; color: #403323; font-size: 35px; font-family: 'Jost'; font-style: italic; font-weight: 400; word-wrap: break-word; margin-bottom: 50px;">
        Explore the average temperature preferences of different garden crops based on water levels.
    </div>

    <!-- Dropdown container -->
    <div id="dropdown-container">
        <!-- Dropdown caption -->
        <div id="dropdown-caption">Choose the water level:</div>

        <!-- Dropdown menu for water levels -->
        <select id="water-level-dropdown" onchange="updateChart()">
            <option value="High">High</option>
            <option value="Moderate">Moderate</option>
            <option value="Low">Low</option>
        </select>
    </div>

    <!-- Plotly Chart Container -->
    <div id="plotly-chart-container">
        <div id="plotly-chart"></div>
    </div>

    <!-- JavaScript for Rendering Chart -->
    <script>
        function updateChart() {
            var waterLevel = document.getElementById("water-level-dropdown").value;
            Plotly.d3.csv('Gardening Crops.csv', function (data) {
                var desiredLabels = ['Turmeric', 'Spinach', 'Beet', 'Chilli', 'Snake Gouard', 'Pepper', 'Cinnamon', 'Lime', 'Tomato', 'Sweet Potato', 'Ginger', 'Brinjals', 'Capsicum', 'Cucumber', 'Pumpkin', 'Orange'];
                var filteredData = data.filter(function (row) {
                    return desiredLabels.includes(row.Label) && row.Waterlevel === waterLevel;
                });

                var avgTempByLabel = {};
                var countByLabel = {};

                filteredData.forEach(function (row) {
                    if (!avgTempByLabel[row.Label]) {
                        avgTempByLabel[row.Label] = 0;
                        countByLabel[row.Label] = 0;
                    }
                    avgTempByLabel[row.Label] += parseFloat(row.Temperature);
                    countByLabel[row.Label]++;
                });

                var labels = Object.keys(avgTempByLabel);
                var avgTemperatures = labels.map(function (label) {
                    return avgTempByLabel[label] / countByLabel[label];
                });


                // Sort labels and avgTemperatures in ascending order based on avgTemperatures
                var dataCombined = labels.map(function (_, i) {
                    return { label: labels[i], avgTemperature: avgTemperatures[i] };
                });
                dataCombined.sort((a, b) => a.avgTemperature - b.avgTemperature);
                labels = dataCombined.map(item => item.label);
                avgTemperatures = dataCombined.map(item => item.avgTemperature);

                var colors = '#5e7153';

                var trace = {
                    x: labels,
                    y: avgTemperatures,
                    type: 'bar',
                    marker: {
                        color: colors
                    }
                };

                var layout = {
                    title: 'Average Temperature by Label for ' + waterLevel + ' Water Level',
                    xaxis: { title: 'Label', tickfont: { family: 'Jost' } }, // Set font family for x-axis labels
                    yaxis: { title: 'Average Temperature', tickfont: { family: 'Jost' } } // Set font family for y-axis labels
                };

                Plotly.newPlot('plotly-chart', [trace], layout);
            });
        }

        // Call updateChart initially to show default chart
        updateChart();
    </script>




    <!-- Placeholder for plant details -->
    <div style="width: 100%; position: relative; align-items: center; margin-left: 30px;">
        <div style="position: relative; align-items: center; justify-content: center; width: 100%;">

            <div id="plantDetails">
                <!-- Placeholder for plant details -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div
            style="width: 90%; height: 350px; position: relative; background: #783E19; border-top-right-radius: 140px; overflow: hidden">

            <!--footer menu-->
            <table class="footer-menu">
                <tr>
                    <td><a href="./index.html">Home</a></td>
                    <td><a href="#">Tools</a></td>
                </tr>
                <tr>
                    <td><a href="./about_us.html">About Us</a></td>
                    <td><a href="#">AI Plant Identifier</a></td>
                </tr>
                <tr>
                    <td><a href="./plant_library.html">Plant Library</a></td>
                    <td><a href="#">Plant Doctor</a></td>
                </tr>
                <tr>
                    <td><a href="./gardening_vitals.html" class="active">Gardening Vitals</a></td>
                    <td><a href="#">Floral Arrangements</a></td>
                </tr>
                <tr>
                    <td><a href="./gardening_modeling.html">Gardening Module</a></td>
                </tr>
            </table>

            <!--Footer logo-->
            <div style="display: flex; width: 100%; position: relative; margin-top: 3%;">
                <div style="position: relative; width: 50%; left:5%;">
                    <span
                        style="color: white; font-size:23px; font-family:'Jost'; font-weight: 500; word-wrap: break-word">Bulblos
                    </span>
                    <span
                        style="color: white; font-size:23px; font-family:'Jost'; font-weight: 400; word-wrap: break-word">Â©
                        Marshmallows 2024
                    </span>
                </div>
            </div>
        </div>
    </footer>

</body>

</html>